<head>
  <link href="./css/timeline.css" rel="stylesheet">
</head>
<!-- Body HTML -->

<body>
  <div class="background">
  </div>
  <!-- Positioner Keys -->
  <div>
    <div class="main-vert-scroller">
      <div>test</div>
      <div style="background-image: linear-gradient(180deg, #ffffff00, #000000bf);">
        <div id="positioner-drone" class="positioner positioner-drone"></div>
        <div id="positioner-tether" class="positioner positioner-tether"></div>
        <div id="positioner-frame" class="positioner positioner-frame"></div>
        <div id="positioner-drone-raise" class="positioner positioner-drone-raise"></div>
        <div id="positioner-box-rotator" class="positioner positioner-box-rotator">
          <div class="year year-1-frame-first">
            <div class="sticky-year">2015</div>
          </div>
          <div class="year year-1-frame ">
            <div class="sticky-year">2016</div>
          </div>
          <div class="year year-1-frame ">
            <div class="sticky-year">2017</div>
          </div>
          <div class="year year-2-frame ">
            <div class="sticky-year">2019</div>
          </div>
          <div class="year year-3-frame ">
            <div class="sticky-year">2020</div>
          </div>
          <div class="year year-3-frame ">
            <div class="sticky-year">2022</div>
          </div>
          <div class="year year-1-frame ">
            <div class="sticky-year">2023</div>
          </div>
          <div class="year year-1-frame ">
            <div class="sticky-year">2024</div>
          </div>
          <div class="year year-1-frame-last">
            <div class="sticky-year">2025</div>
          </div>
        </div>
      </div>
      <div>test</div>
    </div>
  </div>
  <div id="vert-flex-container" class="fixed-vert-flex">
    <!-- Drone and Tether -->
    <!-- Panels -->
    <div class="three-d-root three-d-scroll-axis">
      <div class="panel-vert-container">
        <div class="three-d-container three-d-rotation-axis">
          <div class="top">
            <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#"
              xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg"
              xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
              xml:space="preserve" style="enable-background:new 0 0 576 576;" viewBox="0 0 576 576" y="0px" x="0px"
              id="Layer_1" version="1.0">
              <metadata id="metadata33">
                <rdf:RDF>
                  <cc:Work rdf:about="">
                    <dc:format>image/svg+xml</dc:format>
                    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                    <dc:title></dc:title>
                  </cc:Work>
                </rdf:RDF>
              </metadata>
              <defs id="defs31" />
              <sodipodi:namedview inkscape:current-layer="Layer_1" inkscape:window-maximized="1" inkscape:window-y="-9"
                inkscape:window-x="-9" inkscape:cy="288" inkscape:cx="288" inkscape:zoom="1.75" showgrid="false"
                id="namedview29" inkscape:window-height="1411" inkscape:window-width="2560" inkscape:pageshadow="2"
                inkscape:pageopacity="0" guidetolerance="10" gridtolerance="10" objecttolerance="10" borderopacity="1"
                bordercolor="#666666" pagecolor="#ffffff" />
              <style id="style2" type="text/css">
                .st0 {
                  fill: #754C29;
                }

                .st1 {
                  fill: #EFBC32;
                }
              </style>
              <path id="path4"
                d="M81.79,301.87c-1.46,0-2.32-0.86-2.32-2.32v-43.47c0-1.46,0.86-2.26,2.32-2.26h8.89  c8.63,0,12.48,3.45,12.48,10.55v3.45c0,4.98-1.86,8.23-6.04,9.63v0.6c4.18,1.46,6.04,4.71,6.04,9.62v3.58  c0,7.17-3.85,10.62-12.48,10.62H81.79z M90.69,274.46c2.99,0,4.05-1.59,4.05-4.05v-6.04c0-2.39-1.06-4.05-4.05-4.05H87.9v14.14  H90.69z M90.69,295.36c2.99,0,4.05-1.66,4.05-4.11v-6.17c0-2.46-1.06-4.12-4.05-4.12H87.9v14.4H90.69z"
                class="st0" />
              <path id="path6"
                d="M153.21,253.81c1.46,0,2.32,0.8,2.32,2.26v1.92c0,1.46-0.86,2.32-2.32,2.32h-10.02v14.27h7.5  c1.46,0,2.32,0.8,2.32,2.26v1.92c0,1.46-0.86,2.32-2.32,2.32h-7.5v14.27h10.02c1.46,0,2.32,0.8,2.32,2.26v1.92  c0,1.46-0.86,2.32-2.32,2.32h-16.13c-1.46,0-2.32-0.86-2.32-2.32v-43.47c0-1.46,0.86-2.26,2.32-2.26H153.21z"
                class="st0" />
              <path id="path8"
                d="M203.85,253.81c1.46,0,2.32,0.8,2.32,2.26v1.92c0,1.46-0.86,2.32-2.32,2.32h-10.02v14.27h7.5  c1.46,0,2.32,0.8,2.32,2.26v1.92c0,1.46-0.86,2.32-2.32,2.32h-7.5v14.27h10.02c1.46,0,2.32,0.8,2.32,2.26v1.92  c0,1.46-0.86,2.32-2.32,2.32h-16.13c-1.46,0-2.32-0.86-2.32-2.32v-43.47c0-1.46,0.86-2.26,2.32-2.26H203.85z"
                class="st0" />
              <path id="path10"
                d="M326.5,274.59h7.5v-18.52c0-1.46,0.86-2.26,2.32-2.26h3.78c1.46,0,2.32,0.8,2.32,2.26v43.47  c0,1.46-0.86,2.32-2.32,2.32h-3.78c-1.46,0-2.32-0.86-2.32-2.32v-18.45h-7.5v18.45c0,1.46-0.86,2.32-2.32,2.32h-3.78  c-1.46,0-2.32-0.86-2.32-2.32v-43.47c0-1.46,0.86-2.26,2.32-2.26h3.78c1.46,0,2.32,0.8,2.32,2.26V274.59z"
                class="st0" />
              <path id="path12"
                d="M382.72,299.54c0,1.46-0.86,2.32-2.32,2.32h-3.78c-1.46,0-2.32-0.86-2.32-2.32v-43.47  c0-1.46,0.86-2.26,2.32-2.26h3.78c1.46,0,2.32,0.8,2.32,2.26V299.54z"
                class="st0" />
              <path id="path14"
                d="M427.65,279.96l3.45-24.09c0.13-1.53,1.13-2.06,2.26-2.06h3.58c1.66,0,2.46,1.13,2.19,2.79l-6.57,43.07  c-0.2,1.59-1,2.19-2.32,2.19h-8.63c-1.33,0-2.19-0.6-2.39-2.19l-6.57-43.07c-0.27-1.66,0.6-2.79,2.19-2.79h3.58  c1.13,0,2.12,0.46,2.32,2.06l3.39,24.09l1.46,16.13"
                class="st0" />
              <path id="path16"
                d="M487.52,253.81c1.46,0,2.32,0.8,2.32,2.26v1.92c0,1.46-0.86,2.32-2.32,2.32H477.5v14.27h7.5  c1.46,0,2.32,0.8,2.32,2.26v1.92c0,1.46-0.86,2.32-2.32,2.32h-7.5v14.27h10.02c1.46,0,2.32,0.8,2.32,2.26v1.92  c0,1.46-0.86,2.32-2.32,2.32h-16.13c-1.46,0-2.32-0.86-2.32-2.32v-43.47c0-1.46,0.86-2.26,2.32-2.26H487.52z"
                class="st0" />
              <path id="path18"
                d="M261.32,236.36l-35.06,20.24v40.48l35.06,20.24l35.06-20.24V256.6L261.32,236.36z M284.92,290.31l-23.12,13.35  l-23.12-13.35v-26.7l23.12-13.35l23.12,13.35V290.31z"
                class="st1" />
              <path id="path20"
                d="M226.97,197.33l-22.04,12.72v25.45l22.04,12.72l22.04-12.72v-25.45L226.97,197.33z M241.8,231.25l-14.54,8.39  l-14.54-8.39v-16.78l14.54-8.39l14.54,8.39V231.25z"
                class="st1" />
              <path id="path22"
                d="M295.08,197.33l-22.04,12.72v25.45l22.04,12.72l22.04-12.72v-25.45L295.08,197.33z M309.92,231.25l-14.54,8.39  l-14.54-8.39v-16.78l14.54-8.39l14.54,8.39V231.25z"
                class="st1" />
              <path id="path24"
                d="M226.97,306.4l-22.04,12.72v25.45l22.04,12.72l22.04-12.72v-25.45L226.97,306.4z M241.8,340.31l-14.54,8.39  l-14.54-8.39v-16.78l14.54-8.39l14.54,8.39V340.31z"
                class="st1" />
              <path id="path26"
                d="M295.08,306.4l-22.04,12.72v25.45l22.04,12.72l22.04-12.72v-25.45L295.08,306.4z M309.92,340.31l-14.54,8.39  l-14.54-8.39v-16.78l14.54-8.39l14.54,8.39V340.31z"
                class="st1" />
            </svg>
          </div>
          <!-- Front -->
          <div id="panel-horz-scroller" class="panel-horz-scroller-container three-d-front-side">
            <div class="panel-horz-flex-scroller">
              <!-- Panel 1 -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/uncle%20sam.webp" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">With few exceptions, commercial use of drones is illegal. <p
                        class="panel-text-content">In 2013, Amazon's Jeff Bezos famously predicts that drones will be
                        making regular deliveries by 2018.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-none.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/drone-compensation.png" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">The FAA introduces the first rule allowing the legal use of drones for
                      commercial purposes. <p class="panel-text-content">Title 14 of The Code of Federal Regulations
                        (CFR), Part 107 allows any person who receives their remote pilot certificate to fly a drone for
                        compensation, but there are some major limitations -- most notably, drones cannot be operated
                        beyond visual line of sight, over people, or at night. </p>
                      <p class="panel-text-content">Also, since there is no drone specific type-certification. Part 107
                        pilots are solely responsible for ensuring the drone's operational safety.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-1-1.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/LAANC-small.gif" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <p class="panel-text-content"><strong><u>LAANC (Low Altitude Authorization and Notification
                          Capability) introduced.</u></strong> LAANC allows drone operators to request flight
                      authorization from ATC controllers using a simple app. </p>
                    <p class="panel-text-content"><strong><u>The DOT and FAA begin UAS IPP (Integration Pilot
                          Program)</u></strong> to accelerate development of drone technology and regulations. </p>
                    <p class="panel-text-content"><strong><u>NASA and FAA begin UAS Traffic Management (UTM) Research
                          Transition Plan</u></strong> to test various technical UTM capability levels.</p>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-none.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/ups-135.jpg" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">Drone Operators Certified to fly under "Part 135". <p
                        class="panel-text-content"> An existing FAA rule, "Part 135", written to regulate the operation
                        of "on demand" air carrier services, such as charter flights and cargo transportation, is
                        granted to the first drone "airline" operators. This is the first time drones are allowed to
                        transport cargo without a waiver and exempted from state or local laws.</p>
                      <p class="panel-text-content">In general, this certification has been touted by drone operators as
                        allowing them to operate "unlimited" drone air transport operations, but, as with part 107,
                        waivers are still needed for BVLOS, flights over people and at night, and are generally limited
                        to pre-authorized rural or suburban areas. And, as with part 107, only a single drone is allowed
                        per pilot.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/waivers-1-1.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main below-viewport">
                <div class="panel-main">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/beehive-logo.png" class="panel-image-beehive" alt="beehive logo">
                  </div>
                  <div class="panel-text-container beehive-info">Founding members of BeeHive meet for the first time to
                    discuss economic, environmental, and safety issues related to "last mile" logistics. </p>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/beehive-logo.png" class="panel-image-beehive" alt="beehive logo">
                  </div>
                </div>
              </div>
              <!-- End Panel -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/Type_Certification_for_UAS-Back_to_the_Future.jpg" class="panel-image"
                      alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">FAA begins to use existing "Special Class" Aircraft Type Certification
                      to type certify drones. (14 CFR 21.17(b))<p class="panel-text-content"> All aircraft need to be
                        certified as airworthy for their intended use. Drones are unique in that they are very small,
                        unmanned, autonomous, and operate at low altitude. Therefore, they do not fall under any
                        existing type certification rules. </p>
                      <p class="panel-text-content">As a stopgap, the FAA has decided to use the existing "Special" Type
                        Certification to certify drones on a case-by-case, risk basis. Ten companies are currently in
                        the process of applying for this certification.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/waivers-1-1.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <!-- End Panel -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/NASA_UTM.jpg" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">NASA and FAA Technology<p class="panel-text-content">NASA granted
                        patent for UTM design and wins Government Invention of the Year. </p>
                      <p class="panel-text-content">FAA Publishes Concept of Operations V2 for Unmanned Aircraft System
                        Traffic Management.</p>
                      <p class="panel-text-content">FAA replaces IPP program wtih BEYOND program to address remaining
                        challenges with BVLOS (Beyond Visual Line Of Sight) operations. </p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/waivers-1-1.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main below-viewport">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/beehive-logo.png" class="panel-image-beehive" alt="beehive logo">
                  </div>
                  <div class="panel-text-container beehive-info">
                    <p>BeeHive focus narrows on an urban "common carrier" drone delivery infrastructure "last mile"
                      solutions.
                    <p>A "common carrier" system solves many of the most pressing "last mile" issues, including cost,
                      environmental concerns, and package safety. An urban solution is seen as the most needed and most
                      challenging. </p>
                    <p>A crucial part of the solution, "The Hive", goes from conceptual idea to design phase.</p>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/beehive-logo.png" class="panel-image-beehive" alt="beehive logo">
                  </div>
                </div>
              </div>
              <!-- Panel End -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/Remote_ID.gif" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">Remote ID rules published.<p class="panel-text-content">All drones,
                        recreational and commercial, will soon be required to broadcast an electronic "license plate",
                        including data such as departure point and current location. This step is considered essential
                        to introducing scaled drone operations into the National Airspace System (NAS) as part of
                        adopting a national UTM system.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-2.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <!-- Panel End -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/drone-stork.gif" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">First companies receive "Special" Type Certification.<p
                        class="panel-text-content">This airworthiness certification opens pathway to fully autonomous
                        BVLOS flights.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-4.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main below-viewport">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/beehive-logo.png" class="panel-image-beehive" alt="beehive logo">
                  </div>
                  <div class="panel-text-container beehive-info">
                    <p>Design of "The Hive" is further refined with modularity, storage, and landing systems all having
                      pending patents. </p>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/beehive-logo.png" class="panel-image-beehive" alt="beehive logo">
                  </div>
                </div>
              </div>
              <!-- Panel End -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/drone-checklist.webp" class="panel-image-waivers" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">Standard Done Type Certification Defined <p class="panel-text-content">
                        The FAA finalizes the standards for performance based type certifying of autonomous drones and
                        integrating them into the National Airspace System (NAS). Drone delivery operations begin to
                        scale up with limited urban drone delivery operations beginning in several pilot cities.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-4.png" class="panel-image" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/NASA_UTM.jpg" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">The first integrated UTM systems are deployed in several pilot cities
                      <p class="panel-text-content"> This allows compliant drones to fly autonomously within the NAS
                        with one person monitoring several drones.</p>
                      <p class="panel-text-content"> Drone delivery operations continue to scale up. New battery
                        technology increases drone range to 30+ miles.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-4.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/finish line.webp" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">Standard Done Type Certification Granted <p class="panel-text-content">
                        No operational limitations: BVLOS, Over People, Nighttime, Many drones per operator.</p>
                      <p class="panel-text-content">Many companies are producing drones that have been certified to
                        perform urban drone delivery operations. UTM systems standardized and operational across the
                        industry and have been installed in several medium and large cities. </p>
                      <p class="panel-text-content">Retailers and shippers quickly transition from ground to aerial
                        delivery.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-5.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/uncle%20sam.jpg" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">Standard Done Type Certification Granted <p class="panel-text-content">
                        No operational limitations: BVLOS, Over People, Nighttime, Many drones per operator.</p>
                      <p class="panel-text-content">Many companies are producing drones that have been certified to
                        perform urban drone delivery operations. UTM systems standardized and operational across the
                        industry and have been installed in several medium and large cities. </p>
                      <p class="panel-text-content">Retailers and shippers quickly transition from ground to aerial
                        delivery.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-none.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <!-- Place Holder. Needed to Prevent blank frames. Don't delete -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/uncle%20sam.jpg" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">Standard Done Type Certification Granted <p class="panel-text-content">
                        No operational limitations: BVLOS, Over People, Nighttime, Many drones per operator.</p>
                      <p class="panel-text-content">Many companies are producing drones that have been certified to
                        perform urban drone delivery operations. UTM systems standardized and operational across the
                        industry and have been installed in several medium and large cities. </p>
                      <p class="panel-text-content">Retailers and shippers quickly transition from ground to aerial
                        delivery.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-none.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <!-- Place Holder. Needed to Prevent blank frames. Don't delete -->
              <div class="panel-container-main">
                <div class="panel-main below-viewport">
                  <div class="panel-left-image-container">
                    <img title="" src="./images/uncle%20sam.jpg" class="panel-image" alt="">
                  </div>
                  <div class="panel-text-container">
                    <h3 class="panel-text-title">Standard Done Type Certification Granted <p class="panel-text-content">
                        No operational limitations: BVLOS, Over People, Nighttime, Many drones per operator.</p>
                      <p class="panel-text-content">Many companies are producing drones that have been certified to
                        perform urban drone delivery operations. UTM systems standardized and operational across the
                        industry and have been installed in several medium and large cities. </p>
                      <p class="panel-text-content">Retailers and shippers quickly transition from ground to aerial
                        delivery.</p>
                    </h3>
                  </div>
                  <div class="panel-right-image-container">
                    <img title="" src="./images/Waivers-none.png" class="panel-image-waivers" alt="">
                  </div>
                </div>
              </div>
              <!-- Panel End -->
            </div>
          </div>
          <!-- right side-->
          <div id="panel-horz-scroller-right" class="panel-horz-scroller-container three-d-right-side">
            <div class="panel-horz-flex-scroller">
            </div>
          </div>
          <!-- Back -->
          <div id="panel-horz-scroller-back" class="panel-horz-scroller-container three-d-back-side">
            <div class="panel-horz-flex-scroller">
            </div>
          </div>
          <!-- Left -->
          <div id="panel-horz-scroller-left" class="panel-horz-scroller-container three-d-left-side">
            <div class="panel-horz-flex-scroller">
            </div>
          </div>
          <!--three-d-container-rotation-->
        </div>
      </div>
    </div>
    <div id="drone-tether2">
      <div id="drone_tether1" class="drone-tether-container">
        <div class="drone">
          <div class="prop-container1">
            <div class="prop prop1">X</div>
          </div>
          <div class="prop-container2">
            <div class="prop prop1">X</div>
          </div>
          <div class="prop-container3">
            <div class="prop prop1">X</div>
          </div>
          <div class="prop-container4">
            <div class="prop prop1">X</div>
          </div>
          <div class="prop-container5">
            <div class="prop prop1">X</div>
          </div>
          <div class="prop-container6">
            <div class="prop prop1">X</div>
          </div>
        </div>
        <div id="tether1" class="tether"></div>
      </div>
    </div>
  </div>
  <script src="./src/AnimSeq.js"></script>
  <script>

    // Copy the inner HTML of the first box side to the other three so they stay in sync.

    const all_panels = Array.from(document.querySelectorAll('.panel-horz-flex-scroller'));

    for (let i = 1; i < all_panels.length; i++) {
      all_panels[i].innerHTML = all_panels[0].innerHTML;
    }

    // Key frame positioners elements
    const drone_positioner = document.getElementById("positioner-drone");
    const tether_positioner = document.getElementById("positioner-tether");
    const frame_positioner = document.getElementById("positioner-frame");
    const drone_positioner_raise = document.getElementById("positioner-drone-raise");
    const box_rotator_positioner = document.getElementById("positioner-box-rotator");

    // Animation elements
    const drone_container = document.getElementById("drone_tether1")
    const drone_container2 = document.getElementById("drone_tether1")

    const drone_sprite = document.querySelector(".drone")

    const tether = document.getElementById("tether1");
    const container = document.getElementById("vert-flex-container");
    const background = document.querySelector(".background")

    const horz_scroller = document.getElementById("panel-horz-scroller");
    const horz_scroller_right = document.getElementById("panel-horz-scroller-right");

    // Animation transition constants
    const lower_drone_key_height = getComputedStyle(container).getPropertyValue("--lower_drone_key_height");
    const lower_drone_key_height_int = Number.parseInt(getComputedStyle(container).getPropertyValue("--lower_drone_key_height"));

    const tether_length_key_height = getComputedStyle(container).getPropertyValue("--tether_length_key_height");
    const tether_length_key_height_int = Number.parseInt(getComputedStyle(container).getPropertyValue("--tether_length_key_height")) / 100 * window.innerHeight;

    const raise_drone_key_height = getComputedStyle(container).getPropertyValue("--raise_drone_key_height");
    const raise_drone_key_height_int = Number.parseInt(getComputedStyle(container).getPropertyValue("--raise_drone_key_height"));

    const box_rot_key_height = getComputedStyle(container).getPropertyValue("--box_rot_key_height");
    const box_rot_key_height_int = Number.parseInt(getComputedStyle(container).getPropertyValue("--box_rot_key_height"));

    const tether_length_start = getComputedStyle(container).getPropertyValue("--tether_length_start");
    const frame_y_pos_start = getComputedStyle(container).getPropertyValue("--frame_y_pos_start");
    const frame_y_pos_start_int = Number.parseInt(getComputedStyle(container).getPropertyValue("--frame_y_pos_start")) / 100 * window.innerHeight;
    const frame_height_int = Number.parseInt(getComputedStyle(container).getPropertyValue("--frame_height")) / 100 * window.innerHeight;


    // The four sides of the box
    const front_side = document.querySelector('.three-d-front-side');
    const right_side = document.querySelector('.three-d-right-side');
    const back_side = document.querySelector('.three-d-back-side');
    const left_side = document.querySelector('.three-d-left-side');

    const front_frames = Array.from(front_side.querySelectorAll(".panel-container-main"));
    const right_frames = Array.from(right_side.querySelectorAll(".panel-container-main"));
    const back_frames = Array.from(back_side.querySelectorAll(".panel-container-main"));
    const left_frames = Array.from(left_side.querySelectorAll(".panel-container-main"));

    const mobile = window.innerWidth < 900;

    let max_drone_lower_pos = mobile ? "1px" : lower_drone_key_height

    //Animation sequence functions
    let lowerDrone = (function () {
      let complete = false;
      return (key_elem) => {
        const rect = key_elem.getBoundingClientRect();
        if (rect.top < 0) {
          if (rect.top > -lower_drone_key_height_int) {
            //sequence is running.
            container.style.setProperty('--drone_pos_y', Math.abs(rect.top) + "px");
            container.style.setProperty('--tether_length', tether_length_start);
            container.style.setProperty('--frame_y_pos', frame_y_pos_start);
            complete = false;
            return RUNNING;
          }
          else if (!complete) {
            //done with sequence.
            container.style.setProperty('--drone_pos_y', max_drone_lower_pos);
            container.style.setProperty('--tether_length', tether_length_start);
            container.style.setProperty('--frame_y_pos', frame_y_pos_start);
            complete = true;
            return DONE;
          }
          else {
            return COMPLETE;
          }
        }
        else {
          complete = false;
          return NOT_RUNNING;
        }
      }

    })();

    function lower_tether() {
      let complete = false;
      return (key_elem) => {
        //Get the top of the positioner. Set the top of bottom of the tether
        const rect = key_elem.getBoundingClientRect();
        if (rect.top < 0) {
          if (rect.top > -tether_length_key_height_int) {
            // seq running
            container.style.setProperty('--frame_y_pos', frame_y_pos_start);
            container.style.setProperty('--tether_length', Math.abs(rect.top) + "px");
            container.style.setProperty('--drone_pos_y', max_drone_lower_pos);

            complete = false;
            return RUNNING;
          }
          else if (!complete) {
            // seq completed
            container.style.setProperty('--tether_length', tether_length_key_height);
            container.style.setProperty('--drone_pos_y', max_drone_lower_pos);

            complete = true;
            return DONE;
          }
          else {
            return COMPLETE;
          }

        }
        else {
          complete = false;
          return NOT_RUNNING;
        }
      }
    }


    let tether_offset = mobile ? 700 : 100;

    function raise_tether() {
      let complete = false;
      const blur_factor = 0.003;
      return (key_elem) => {
        const rect = key_elem.getBoundingClientRect();
        if (rect.top < 0) {
          if (rect.top > -tether_length_key_height_int) {
            //running
            let tether_length = Math.max(0, frame_y_pos_start_int - frame_height_int - Math.abs(Number(rect.top)) + tether_offset)
            container.style.setProperty('--tether_length', tether_length + "px");
            container.style.setProperty('--frame_y_pos', frame_y_pos_start_int - Math.abs(rect.top) + "px");
            container.style.setProperty('--drone_pos_y', max_drone_lower_pos);

            background.style.setProperty('--background_filter', Math.abs(rect.top) * blur_factor + "px");

            complete = false;
            return RUNNING;
          }
          else if (!complete) {
            //done
            container.style.setProperty('--tether_length', tether_length_start);
            container.style.setProperty('--frame_y_pos', frame_y_pos_start_int - tether_length_key_height_int + "px");
            container.style.setProperty('--drone_pos_y', max_drone_lower_pos);

            background.style.setProperty('--background_filter', tether_length_key_height_int * blur_factor + "px");

            complete = true;
            return DONE;
          }
          else {
            return COMPLETE;
          }
        }
        else {
          complete = false;
          return NOT_RUNNING;
        }
      }
    }

    let raise_drone = (function () {
      let complete = false;
      return (key_elem) => {
        const rect = key_elem.getBoundingClientRect();
        if (rect.top < 0) {
          if (rect.top > -raise_drone_key_height_int) {
            //sequence is running.
            container.style.setProperty('--drone_pos_y', 100 + rect.top + "px");
            container.style.setProperty('--tether_length', tether_length_start);

            complete = false;
            return RUNNING;
          }
          else if (!complete) {
            //done with sequence.
            container.style.setProperty('--drone_pos_y', -200 + "px");
            container.style.setProperty('--tether_length', tether_length_start);
            complete = true;
            return DONE;
          }
          else {
            return COMPLETE;
          }
        }
        else {
          complete = false;
          return NOT_RUNNING;
        }
      }

    })();

    function hide_all_frames(frames) {
      for (let frame of frames) {
        frame.style.display = "none";
      }
    }

    (function init_frame_box() {
      hide_all_frames(front_frames);
      hide_all_frames(right_frames);
      hide_all_frames(back_frames);
      hide_all_frames(left_frames);

      front_frames[0].style.display = "block";
      right_frames[1].style.display = "block";
      back_frames[2].style.display = "block";
      left_frames[3].style.display = "block";
    })();

    function rotate_box() {
      let complete = false;
      return (key_elem) => {
        const rect = key_elem.getBoundingClientRect();
        if (rect.top < 0) {
          if (rect.top > -box_rot_key_height_int) {
            complete = false;

            //For every X pixels scrolled, rotate Y degrees.
            const rotation_factor = 5;
            const num_slides = 13;
            const degress_slide = 90;
            const max_rotation = num_slides * degress_slide;
            const rotation = -1 * Math.min(Math.abs(rect.top / rotation_factor), max_rotation);
            container.style.setProperty('--box_rot_degs', rotation + "deg");

            // Figure out which frame to display based how much we have rotated the box.
            function increment_index(index_offset, flip_offset, rotation) {
              const index = Math.min(front_frames.length - 1, Math.trunc((Math.abs(rotation) + flip_offset) / 360) * 4);
              increment = index + index_offset;
              return increment;
            }
            const front_index = increment_index(0, 90, rotation);
            const right_index = increment_index(1, 90, rotation);
            const back_index = increment_index(2, 90, rotation);
            const left_index = increment_index(3, -90, rotation);

            hide_all_frames(front_frames);
            hide_all_frames(right_frames);
            hide_all_frames(back_frames);
            hide_all_frames(left_frames);

            front_frames[front_index].style.display = "block";
            right_frames[right_index].style.display = "block";
            back_frames[back_index].style.display = "block";
            left_frames[left_index].style.display = "block";

            // For each panel, switch which panel is visible base on the rotation index which is calculated
            // from the rotation angle. Get the frame array for each panel by doing a query selector all, and then
            // do a lookup based on the rotation angle. So, for the first frame, <90 would be the first frame, <360+90 would be
            // the second frame and so forth. The second frame, <180 would be the first frame, <360+180 would be the second, and
            // so forth.
            return RUNNING;
          }
          else if (!complete) {
            //done

            complete = true;
            return DONE;
          }
          else {
            return COMPLETE;
          }
        }
        else {
          complete = false;
          return NOT_RUNNING;
        }
      }
    }

    // Animation sequences
    let lowerDroneSeq = new AnimSequence(lowerDrone, drone_container, drone_positioner);
    let lowerTetherSeq = new AnimSequence(lower_tether(), tether, tether_positioner);
    let raiseTetherSeq = new AnimSequence(raise_tether(), tether, frame_positioner);
    let raiseDroneSeq = new AnimSequence(raise_drone, drone_container, drone_positioner_raise);
    let boxRotateSeq = new AnimSequence(rotate_box(), horz_scroller, box_rotator_positioner);

    // Run the animation
    async function runAnimationSequence() {

      let seq_done = await lowerDroneSeq.play(1);
      if (seq_done) {
        let seq_done = await lowerTetherSeq.play(2);
        if (seq_done) {
          let seq_done = await raiseTetherSeq.play(3);
          if (1) {
            if (mobile) {
              raiseDroneSeq.play(4);
              await boxRotateSeq.play(5);

            }
            else {
              await boxRotateSeq.play(5);
            }
          }
        }
      }
      return true;
    }


    document.addEventListener("scroll", async () => {
      await runAnimationSequence();
    });

    setInterval(() => {
      runAnimationSequence();
    }, 100);

    // Fly the drone
    (() => {
      let move_sum = 0;
      let trans_end = true;
      drone_container.addEventListener('transitionend', () => {
        trans_end = true;
        drone_sprite.style.setProperty("--z_rot", 0 + "deg");
      })
      window.addEventListener('mousemove', e => {
        if (trans_end) {
          let drone_pos = drone_sprite.getBoundingClientRect()
          let drone_center = drone_pos.x + (drone_pos.width / 2);
          move_sum += e.clientX - drone_center;
          drone_container.style.setProperty("--x_trans", move_sum + "px");
          let rotation = Math.min(Math.abs(e.movementX), 15) * Math.sign(e.movementX);
          drone_sprite.style.setProperty("--z_rot", rotation + "deg")
          trans_end = false;
        }
      });

    })();
  </script>
</body>